@using AutoMapper
@using PhotoContest.Models.Enumerations
@using PhotoContest.Web.Models.BindingModel
@model  PhotoContest.Web.Models.ViewModels.ContestFullViewModel
@{
    ViewBag.Title = "Contest details";
}

@if (TempData["message-create-contest-success"] != null)
{
    <h3 class="create-contest-success">@TempData["message-create-contest-success"]</h3>
}

@*<form method="POST" action="~/Pictures" enctype="multipart/form-data">
    <input type="text" name="title"/>
    <input type="file" name="image"/>
    <input type="submit" value="Upload"/>
</form>

@Html.BeginForm("UploadImage", "PicturesController", FormMethod.Post, FormMethod.Post, new {enctype = "multipart/form-data"})*@

@Html.Partial("_UploadFormPartial", new ImageBindingModelUserInput())

<div class="row">
    <div class="col-md-4">
        <div class="panel panel-info">
            <div class="panel-heading">
                <h3 class="panel-title">Details</h3>
            </div>
            <div class="panel-body">
                <div class="row"><strong>Title</strong></div>
                <div class="row">@Model.Title</div>
                <hr/>
                <div class="row"><strong>Theme</strong></div>
                <div class="row">@Model.Description</div>
                <hr/>
                <div class="row"><strong>Author</strong></div>
                <div class="row">@Model.OwnerName</div>
                <hr/>
                <div class="row"><strong>Voting</strong></div>
                <div class="row">@Model.VotingStrategy</div>
                <hr/>
                <div class="row"><strong>Reward</strong></div>
                <div class="row">@Model.RewardStrategy</div>
                <hr/>
                <div class="row"><strong>Participation</strong></div>
                <div class="row">@Model.ParticipationStrategy</div>
                <hr/>
                <div class="row"><strong>Deadline</strong></div>
                <div class="row">@Model.DeadlineStrategy</div>
                <hr/>
                <div class="row"><strong>Created on</strong></div>
                <div class="row">@Model.CreatedOn</div>
                <hr/>
                <div class="row"><strong>Partisipants</strong></div>
                <div class="row">@Model.NumberOfParticipants</div>
                <hr/>
                <div class="row"><strong>Open until</strong></div>
                <div class="row">@Model.Deadline</div>
                <hr/>
                <div class="row"><strong>Author</strong></div>
                <div class="row">@Model.OwnerName</div>
                <hr/>
                <div class="row"><strong>Prizes</strong></div>
                <div class="row">@Model.PrizeValues</div>
                <hr/>
                <div class="row"><strong>Count of prizes</strong></div>
                <div class="row">@Model.PrizeCount</div>
                <hr/>
                <div class="row"><strong>Opened</strong></div>
                <div class="row">
                    @if (@Model.IsClosed == IsClosed.Yes.ToString())
                    {
                        @:Yes
                    }
                    else
                    {
                        @:No
                    }
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Gallery</h3>
            </div>
            <div class="panel-body">
                <div class="row">
                    @if (!@Model.ContestPictures.Any())
                    {
                        <h4>This contest has no photos</h4>
                    }
                    else
                    {
                        foreach (var picture in @Model.ContestPictures)
                        {
                            <div class="col-md-6 image-container">
                                <div class="row image-title">
                                    <strong>@picture.Title</strong>
                                </div>
                                <div class="row image">
                                    @if (@picture.ImageBase64Data == null)
                                    {
                                        <img class="contest-image" src="http://www.iconeasy.com/icon/png/Photographic/Front%20Row%201.3%20Realistic%20Skin/Original%20PhotosIcon.png" alt="contest-picture" />
                                    }
                                </div>
                                <div class="row">
                                    @Html.ActionLink(@picture.OwnerUserName, "Profile", "Users",
                                    new { id = @picture.OwnerId }, null)
                                </div>
                            </div>
                        }
                    }
                </div>
                
            </div>
        </div>
    </div>
</div>

@*@Html.Partial("Vote")*@

@*@Html.ActionLink("Vote", "IncreaseVote", "Votes", new { id = Model.Id})*@

@using (Html.BeginForm("Vote", "Votes", new {contestId = Model.Id}))
{
    <input type="submit" class="btn btn-primary" value="Vote +"/>
}